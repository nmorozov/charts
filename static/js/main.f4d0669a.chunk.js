(window.webpackJsonpcharts=window.webpackJsonpcharts||[]).push([[0],{20:function(t,e,a){t.exports=a(34)},30:function(t,e,a){},31:function(t,e,a){},32:function(t,e,a){},33:function(t,e,a){},34:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),i=a(8),s=a(19),h=a(4),u=a(5),d=a(9),l=a(7),v=a(10),f=a(3),C=a(1),m=Object(C.shape)({xCoordinate:C.number,yCoordinate:C.number}),p=(Object(C.shape)({color:C.string.isRequired,coordinates:Object(C.arrayOf)(m)}),"add_new_chart"),y="move_chart_to_another_canvas",b="move_chart",x="remove_charts";function w(t){return{type:p,payload:t}}function k(t,e,a){return{type:y,payload:{fromCanvasIndex:t,toCanvasIndex:e,chartIndex:a}}}function g(t,e,a){return{type:b,payload:{chartData:t,canvasIndex:e,chartIndex:a}}}function D(){return{type:x}}var O=a(14),j=a.n(O);function E(t){for(var e=new Set,a=t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(;a>0;){var c=j.a.random.apply(j.a,r);e.has(c)||(e.add(c),a-=1)}return Array.from(e)}function M(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n={color:function(){for(var t="#",e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}(),coordinates:[]},r=E(a,0,t).sort(function(t,e){return t-e}),o=E(a,0,e),c=0;c<a;c+=1)n.coordinates.push({xCoordinate:r[c],yCoordinate:o[c]});return n}a(30);var I=function(t){var e=t.children;return r.a.createElement("div",{className:"panel"},e)},P=(a(31),function(t){var e=t.handleButtonClick,a=t.text;return r.a.createElement("button",{className:"add-new-chart-btn",onClick:e,type:"button"},a)});P.defaultProps={handleButtonClick:function(){}};var W=P,A=function(){function t(e){Object(h.a)(this,t),this.canvas=e,this.ctx=this.canvas.getContext("2d")}return Object(u.a)(t,[{key:"drawCharts",value:function(t){var e=this;t.forEach(function(t){e.ctx.strokeStyle=t.color,e.drawLines(t.coordinates),e.drawDots(t.coordinates,t.color)})}},{key:"drawDots",value:function(t,e){var a=this;t.forEach(function(t){a.ctx.beginPath(),a.ctx.arc(t.xCoordinate,t.yCoordinate,5,0,2*Math.PI,!1),a.ctx.fillStyle=e,a.ctx.fill(),a.ctx.lineWidth=1,a.ctx.strokeStyle="#000",a.ctx.stroke(),a.ctx.closePath()})}},{key:"drawLines",value:function(t){var e=this;this.ctx.lineWidth=3,this.ctx.moveTo(t[0].xCoordinate,t[0].yCoordinate),this.ctx.beginPath(),t.forEach(function(t){e.ctx.lineTo(t.xCoordinate,t.yCoordinate)}),this.ctx.stroke(),this.ctx.closePath()}}]),t}(),S=function(t){function e(){var t,a;Object(h.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).canvas=null,a.ctx=null,a.dragMode=!1,a.currentChart=null,a.chartsData=[],a.chartWasMoved=!1,a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.initCanvas(),this.drawer=new A(this.canvas)}},{key:"componentDidUpdate",value:function(){var t=this.props.chartsData;this.chartsData=t,this.clearCanvas(),this.drawer.drawCharts(this.chartsData)}},{key:"initCanvas",value:function(){this.ctx=this.canvas.getContext("2d"),this.initDimensions(),this.initEventListeners()}},{key:"initDimensions",value:function(){this.canvas.width=document.documentElement.clientWidth,this.canvas.height=document.documentElement.clientHeight/2-35}},{key:"initEventListeners",value:function(){var t=this;this.canvas.addEventListener("mousedown",function(e){t.dragMode=!0;for(var a=0;a<t.chartsData.length;a+=1)for(var n=0;n<t.chartsData[a].coordinates.length;n+=1){var r=t.chartsData[a].coordinates[n];if(t.checkIfMouseInsidePointWithCoordinates(e,r)){t.currentChart=a;break}}}),this.canvas.addEventListener("mouseup",function(){var e=t.props,a=e.handleMoveChart,n=e.fromCanvasIndex;t.chartWasMoved&&a(t.chartsData[t.currentChart],n,t.currentChart),t.dragMode=!1,t.chartWasMoved=!1,t.currentChart=null}),this.canvas.addEventListener("mousemove",function(e){if(t.dragMode&&null!==t.currentChart){for(var a=0;a<t.chartsData[t.currentChart].coordinates.length;a+=1)t.chartsData[t.currentChart].coordinates[a].xCoordinate+=e.movementX,t.chartsData[t.currentChart].coordinates[a].yCoordinate+=e.movementY;t.chartWasMoved=!0,t.clearCanvas(),t.drawer.drawCharts(t.chartsData)}}),this.canvas.addEventListener("mouseleave",function(e){if(t.chartsData.length>0&&t.dragMode&&e.layerX>0&&e.layerX<t.canvas.width){t.dragMode=!1;var a=t.props,n=a.handleMoveChartToAnotherCanvas,r=a.fromCanvasIndex,o=a.totalCanvases,c=a.handleMoveChart,i=e.layerY>t.canvas.height-5?r+1:r-1;if(i<0||i>o-1)return void(t.chartWasMoved&&c(t.chartsData[t.currentChart],r,t.currentChart));n(r,i,t.currentChart),t.drawer.drawCharts(t.chartsData),t.chartWasMoved=!1}})}},{key:"checkIfMouseInsidePointWithCoordinates",value:function(t,e){return t.clientX>=e.xCoordinate-5&&t.clientX<=e.xCoordinate+5&&t.layerY>=e.yCoordinate-5&&t.layerY<=e.yCoordinate+5}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"render",value:function(){var t=this;return r.a.createElement("canvas",{ref:function(e){t.canvas=e}})}}]),e}(r.a.Component);S.defaultProps={chartsData:[],totalCanvases:0};var B=S;a(32);function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}var T=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(d.a)(this,Object(l.a)(e).call(this,t))).handleMoveChartToAnotherCanvas=function(t,e,n){(0,a.props.moveChartToAnotherCanvas)(t,e,n)},a.handleMoveChart=function(t,e,n){(0,a.props.moveChart)(t,e,n)},a.state={chartsData:[]},a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.chartsData,a=t.removeCharts;this.totalCanvases=e.length,this.setState({chartsData:e}),this.removeCharts=a}},{key:"handleAddNewChartButtonClick",value:function(){(0,this.props.addNewChart)(M(document.documentElement.clientWidth,document.documentElement.clientHeight/2-35,10))}},{key:"renderCanvas",value:function(t,e){return r.a.createElement(B,{key:e,fromCanvasIndex:e,handleMoveChartToAnotherCanvas:this.handleMoveChartToAnotherCanvas,handleMoveChart:this.handleMoveChart,chartsData:t,totalCanvases:this.totalCanvases})}},{key:"renderCanvases",value:function(t){var e=this;return 0===t.length?r.a.createElement("div",null):t.map(function(t,a){return e.renderCanvas(t,a)})}},{key:"render",value:function(){var t=this,e=this.state.chartsData;return r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(W,{handleButtonClick:function(){return t.handleAddNewChartButtonClick()},text:"Add new chart"}),r.a.createElement(W,{handleButtonClick:this.removeCharts,text:"Remove charts"})),this.renderCanvases(e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(a,!0).forEach(function(e){Object(s.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},e,{},t)}}]),e}(r.a.Component);T.defaultProps={chartsData:[]};var _=Object(i.b)(function(t){return{chartsData:t.ChartReducer.toJS()}},function(t){return Object(f.a)({addNewChart:w,moveChartToAnotherCanvas:k,moveChart:g,removeCharts:D},t)})(T),N=a(15),R=Object(N.a)([[],[]]),X=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0,n=a.payload;switch(a.type){case p:t=e.updateIn([0],function(t){return t.push(n)});break;case y:t=e.updateIn([n.toCanvasIndex],function(t){return t.push(e.toJS()[n.fromCanvasIndex][n.chartIndex])}).updateIn([n.fromCanvasIndex],function(t){return t.splice(n.chartIndex,1)});break;case b:t=e.updateIn([n.canvasIndex,n.chartIndex],function(){return n.chartData});break;case x:t=Object(N.a)([[],[]]);break;default:return e}return t},J=Object(f.c)(Object(f.b)({ChartReducer:X}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(33);c.a.render(r.a.createElement(i.a,{store:J},r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.f4d0669a.chunk.js.map